/*
* SlickSelect v2.1.0 Copyright (c) 2015 AJ Savino
* https://github.com/koga73/SlickSelect
* MIT LICENSE
*/
var SlickSelect={EVENT_CHANGE:"change",EVENT_OPEN:"open",EVENT_CLOSE:"close",CLASS_SLICKSELECT:"slickselect",CLASS_DISPLAY_SELECTED:"slickselect-display-selected",CLASS_OPTIONS:"slickselect-options",CLASS_OPTION:"slickselect-option",CLASS_OPTION_SELECTED:"slickselect-option-selected",CLASS_OPTION_HIGHLIGHT:"slickselect-option-highlight",CLASS_OPEN:"slickselect-open",CLASS_HIDDEN:"slickselect-hidden",defaultParams:{placeholder:null,scroll:!1,scrollSnapDist:8,clickDist:8}};!function(e){e.fn.SlickSelect=function(t){var l=e.extend({},e.fn.SlickSelect.defaultParams,t),n=this,i={_slickSelect:null,_displaySelected:null,_options:null,_keyIndex:-1,_isDragging:!1,_beginDragPoint:null,_beginDragOptionsPoint:null,isOpen:!1,selectedIndex:-1,value:null},c={initialize:function(t){var a=n[0].getAttribute("class");a=a?a+" ":"",a+=SlickSelect.CLASS_SLICKSELECT;var o=document.createElement("div");o.setAttribute("tabindex",0),o.setAttribute("class",a),i._slickSelect=o;var s=document.createElement("span");s.setAttribute("class",SlickSelect.CLASS_DISPLAY_SELECTED),i._displaySelected=s;var r=document.createElement("ul");r.setAttribute("class",SlickSelect.CLASS_OPTIONS),i._options=r;for(var S=n[0].querySelectorAll("option"),d=S.length,_=0;d>_;_++){var u=S[_],p=document.createElement("li");p.setAttribute("class",SlickSelect.CLASS_OPTION),p.innerHTML=u.innerHTML;for(var g=u.attributes,k=g.length,v=0;k>v;v++){var f=g[v];f.specified&&("value"==f.name?p.setAttribute("data-value",u.getAttribute("value")):"class"==f.name||/^(data\-)?ng\-/.test(f.name)||p.setAttribute(f.name,f.value))}r.appendChild(p)}if(o.appendChild(s),o.appendChild(r),n[0].parentNode.insertBefore(o,n[0]),n.addClass(SlickSelect.CLASS_HIDDEN),t)c.selectOption(t);else{var h=n[0].querySelectorAll("option[selected]");c.selectOption(h.length?h[0].getAttribute("value"):-1)}var O=e(o),C=e(document);C.on("keydown",c._handler_keydown),O.on("focusout",c._handler_focusout),O.on("click",c._handler_click),l.scroll&&(O.on("touchstart mousedown",c._handler_beginDrag),C.on("touchmove mousemove",c._handler_moveDrag),C.on("touchend mouseup",c._handler_endDrag))},destroy:function(){c.close(),c._handler_endDrag();var t=i._slickSelect;if(t){var l=e(t);l.off("focusout",c._handler_focusout),l.off("click",c._handler_click),l.off("touchstart mousedown",c._handler_beginDrag);var a=e(document);a.off("keydown",c._handler_keydown),a.off("touchmove mousemove",c._handler_moveDrag),a.off("touchend mouseup",c._handler_endDrag),t.parentNode&&t.parentNode.removeChild(t),i._displaySelected=null,i._options=null,i._slickSelect=null}i._beginDragPoint=null,i._beginDragOptionsPoint=null,i.selectedIndex=-1,i.value=null,n.removeClass(SlickSelect.CLASS_HIDDEN)},open:function(){i.isOpen||(i.isOpen=!0,e(i._slickSelect).addClass(SlickSelect.CLASS_OPEN),n.trigger(SlickSelect.EVENT_OPEN))},close:function(){if(i.isOpen){i.isOpen=!1;var t=e(i._slickSelect),l=e("."+SlickSelect.CLASS_OPTION,t);l.removeClass(SlickSelect.CLASS_OPTION_HIGHLIGHT),i._keyIndex=-1,t.removeClass(SlickSelect.CLASS_OPEN),n.trigger(SlickSelect.EVENT_CLOSE)}},selectOption:function(t){var a=e("."+SlickSelect.CLASS_OPTION,e(i._slickSelect));a.removeClass(SlickSelect.CLASS_OPTION_SELECTED);var o=null;if(isNaN(t))o=t.jquery?t:a.filter("[data-value='"+t+"']");else{if(-1==t){var s=n.attr("data-placeholder")||l.placeholder;if(s)return i._displaySelected.innerHTML=s,i.selectedIndex=-1,i.value=null,void(n[0].selectedIndex=i.selectedIndex);t=0}-1!=t&&(o=a.eq(t))}var r=i.selectedIndex;o.length?r=o.index():(0>r||r>a.length-1)&&(r=0);var S=a.eq(r);S.addClass(SlickSelect.CLASS_OPTION_SELECTED),l.scroll&&(i._options.style.top=-S.position().top-1+"px"),i.selectedIndex!=r&&(i._displaySelected.innerHTML=S[0].innerHTML,i.selectedIndex=r,i.value=o.attr("data-value"),n[0].selectedIndex=i.selectedIndex,n.trigger(SlickSelect.EVENT_CHANGE)),c.close()},update:function(){var e=i.value;c.destroy(),c.initialize(e)},_handler_click:function(t){t.preventDefault();var n=!l.scroll;if(!n){var a=c._getTouchPoint(t),o=Math.abs(a[1]-i._beginDragPoint[1]);o<l.clickDist&&(n=!0)}if(n){var s=e(t.target);s.hasClass(SlickSelect.CLASS_OPTION)?c.selectOption(s):i.isOpen?c.close():c.open()}return!1},_handler_keydown:function(t){var l=e(i._slickSelect);if(l.is(":focus")){var n=e("."+SlickSelect.CLASS_OPTION,l),a=n.length,o=!1,s=t.keyCode;switch(!0){case 38==s:i._keyIndex--,i._keyIndex<0&&(i._keyIndex=a-1),o=!0,i.isOpen||c.open();break;case 40==s:i._keyIndex++,i._keyIndex>a-1&&(i._keyIndex=0),o=!0,i.isOpen||c.open();break;case 13==s:case 32==s:i.isOpen?-1!=i._keyIndex?c.selectOption(i._keyIndex):c.close():c.open();break;case s>=48&&57>=s:case s>=65&&90>=s:case s>=97&&122>=s:var r=(i._keyIndex,n.slice(i._keyIndex+1,a));r=e.merge(r,n.slice(0,i._keyIndex+1));for(var S=r.length,d=0;S>d;d++){var _=e(r[d]);if(_.text().substr(0,1).toLowerCase()==String.fromCharCode(s).toLowerCase()){i._keyIndex=(d+i._keyIndex+1)%S,o=!0,i.isOpen||c.open();break}}break;default:return}if(t.preventDefault(),o){n.removeClass(SlickSelect.CLASS_OPTION_HIGHLIGHT);var u=n.eq(i._keyIndex);u.addClass(SlickSelect.CLASS_OPTION_HIGHLIGHT);var p=e(i._options),g=p[0].scrollHeight,k=p.height();if(g>k){var v=p.scrollTop(),f=u.position().top+v,h=u.outerHeight();f+h>v+k?p.scrollTop(f-k+h):v>f&&p.scrollTop(f)}}return!1}},_handler_focusout:function(e){return e.preventDefault(),i.isOpen&&c.close(),!1},_handler_beginDrag:function(t){if(!i._isDragging){i._beginDragPoint=c._getTouchPoint(t);var l=e(i._options);if(l.is(":visible")){i._isDragging=!0;var n=l.position();i._beginDragOptionsPoint=[n.left,n.top]}}},_handler_moveDrag:function(t){if(i._isDragging){var n=e(i._slickSelect),a=e(i._options),o=c._getTouchPoint(t),s=i._beginDragOptionsPoint[1]+(o[1]-i._beginDragPoint[1]),r=n.outerHeight()-a.outerHeight()-1,S=-1;s=Math.max(Math.min(s,S),r);for(var d=.5*n.outerHeight(),_=e("."+SlickSelect.CLASS_OPTION,n),u=_.length,p=0;u>p;p++){var g=e(_[p]),k=g.position().top,v=k+.5*g.outerHeight(),f=Math.abs(s+v-d);d>=f&&(_.removeClass(SlickSelect.CLASS_OPTION_SELECTED),_.eq(p).addClass(SlickSelect.CLASS_OPTION_SELECTED),f<l.scrollSnapDist&&(s=-k+S))}a.css("top",s+"px")}},_handler_endDrag:function(){if(i._isDragging){i._isDragging=!1;var t=e("."+SlickSelect.CLASS_OPTION_SELECTED,e(i._slickSelect));t.length&&c.selectOption(t)}},_getTouchPoint:function(e){var t=e;return e.originalEvent&&(e.originalEvent.touches||e.originalEvent.changedTouches)&&(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]),[t.clientX,t.clientY]}};return n.SlickSelect={isOpen:function(){return i.isOpen},selectedIndex:function(){return i.selectedIndex},value:function(){return i.value},initialize:c.initialize,destroy:c.destroy,open:c.open,close:c.close,selectOption:c.selectOption,update:c.update},n.SlickSelect.initialize(),n},e.fn.SlickSelect.defaultParams=SlickSelect.defaultParams}(jQuery);