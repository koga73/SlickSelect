/*
* SlickSelect v2.2.0 Copyright (c) 2018 AJ Savino
* https://github.com/koga73/SlickSelect
* MIT LICENSE
*/
var SlickSelect={EVENT_CHANGE:"change",EVENT_OPEN:"open",EVENT_CLOSE:"close",CLASS_SLICKSELECT:"slickselect",CLASS_DISPLAY_SELECTED:"slickselect-display-selected",CLASS_OPTIONS:"slickselect-options",CLASS_OPTION:"slickselect-option",CLASS_OPTION_SELECTED:"slickselect-option-selected",CLASS_OPTION_HIGHLIGHT:"slickselect-option-highlight",CLASS_OPEN:"slickselect-open",CLASS_HIDDEN:"slickselect-hidden",defaultParams:{placeholder:null,scroll:!1,scrollSnapDist:8,clickDist:8,hover:!1}};!function(O){O.fn.SlickSelect=function(e){var v=O.extend({},O.fn.SlickSelect.defaultParams,e),h=this,f={_slickSelect:null,_displaySelected:null,_options:null,_keyIndex:-1,_isDragging:!1,_beginDragPoint:null,_beginDragOptionsPoint:null,isOpen:!1,selectedIndex:-1,value:null},k={initialize:function(e){var t=h[0].getAttribute("class");t=t?t+" ":"",t+=SlickSelect.CLASS_SLICKSELECT;var l=document.createElement("div");l.setAttribute("tabindex",0),l.setAttribute("class",t),f._slickSelect=l;var n=document.createElement("span");n.setAttribute("class",SlickSelect.CLASS_DISPLAY_SELECTED),f._displaySelected=n;var i=document.createElement("ul");i.setAttribute("class",SlickSelect.CLASS_OPTIONS),f._options=i;for(var o=h[0].querySelectorAll("option"),c=o.length,a=0;a<c;a++){var s=o[a],r=document.createElement("li");r.setAttribute("class",SlickSelect.CLASS_OPTION),r.innerHTML=s.innerHTML;for(var _=s.attributes,d=_.length,S=0;S<d;S++){var u=_[S];u.specified&&("value"==u.name?r.setAttribute("data-value",s.getAttribute("value")):"class"==u.name||/^(data\-)?ng\-/.test(u.name)||r.setAttribute(u.name,u.value))}i.appendChild(r)}if(l.appendChild(n),l.appendChild(i),h[0].parentNode.insertBefore(l,h[0]),h.addClass(SlickSelect.CLASS_HIDDEN),e)k.selectOption(e);else{var p=h[0].querySelectorAll("option[selected]");p.length?k.selectOption(p[0].getAttribute("value")):k.selectOption(-1)}var g=O(l);O(document).on("keydown",k._handler_keydown),g.on("focusout",k._handler_focusout),g.on("click",k._handler_click),v.hover&&(g.on("mouseenter",k._handler_mouseenter),g.on("mouseleave",k._handler_mouseleave)),v.scroll&&g.on("touchstart mousedown",k._handler_beginDrag)},destroy:function(){k.close(),k._handler_endDrag();var e=f._slickSelect;if(e){var t=O(e);t.off("focusout",k._handler_focusout),t.off("click",k._handler_click),t.off("mouseenter",k._handler_mouseenter),t.off("mouseleave",k._handler_mouseleave),t.off("touchstart mousedown",k._handler_beginDrag);var l=O(document);l.off("keydown",k._handler_keydown),l.off("touchmove mousemove",k._handler_moveDrag),l.off("touchend mouseup",k._handler_endDrag),e.parentNode&&e.parentNode.removeChild(e),f._displaySelected=null,f._options=null,f._slickSelect=null}f._beginDragPoint=null,f._beginDragOptionsPoint=null,f.selectedIndex=-1,f.value=null,h.removeClass(SlickSelect.CLASS_HIDDEN)},open:function(){f.isOpen||(f.isOpen=!0,O(f._slickSelect).addClass(SlickSelect.CLASS_OPEN),h.trigger(SlickSelect.EVENT_OPEN))},close:function(){if(f.isOpen){f.isOpen=!1;var e=O(f._slickSelect);O("."+SlickSelect.CLASS_OPTION,e).removeClass(SlickSelect.CLASS_OPTION_HIGHLIGHT),f._keyIndex=-1,e.removeClass(SlickSelect.CLASS_OPEN),h.trigger(SlickSelect.EVENT_CLOSE)}},selectOption:function(e){var t=O("."+SlickSelect.CLASS_OPTION,O(f._slickSelect));t.removeClass(SlickSelect.CLASS_OPTION_SELECTED);var l=null;if(isNaN(e))l=e.jquery?e:t.filter("[data-value='"+e+"']");else{if(-1==e){var n=h.attr("data-placeholder")||v.placeholder;if(n)return f._displaySelected.innerHTML=n,f.selectedIndex=-1,f.value=null,void(h[0].selectedIndex=f.selectedIndex);e=0}-1!=e&&(l=t.eq(e))}var i=f.selectedIndex;l.length?i=l.index():(i<0||i>t.length-1)&&(i=0);var o=t.eq(i);o.addClass(SlickSelect.CLASS_OPTION_SELECTED),v.scroll&&(f._options.style.top=-o.position().top-1+"px"),f.selectedIndex!=i&&(f._displaySelected.innerHTML=o[0].innerHTML,f.selectedIndex=i,f.value=l.attr("data-value"),h[0].selectedIndex=f.selectedIndex,h.trigger(SlickSelect.EVENT_CHANGE)),k.close()},update:function(){var e=f.value;k.destroy(),k.initialize(e)},_handler_click:function(e){e.preventDefault();var t=!v.scroll;if(!t){var l=k._getTouchPoint(e);Math.abs(l[1]-f._beginDragPoint[1])<v.clickDist&&(t=!0)}if(t){var n=O(e.target);n.hasClass(SlickSelect.CLASS_OPTION)?k.selectOption(n):f.isOpen?k.close():k.open()}return!1},_handler_mouseenter:function(e){f.isOpen||k.open()},_handler_mouseleave:function(e){f.isOpen&&k.close()},_handler_keydown:function(e){var t=O(f._slickSelect);if(t.is(":focus")){var l=O("."+SlickSelect.CLASS_OPTION,t),n=l.length,i=!1,o=e.keyCode;switch(!0){case 38==o:f._keyIndex--,f._keyIndex<0&&(f._keyIndex=n-1),i=!0,f.isOpen||k.open();break;case 40==o:f._keyIndex++,f._keyIndex>n-1&&(f._keyIndex=0),i=!0,f.isOpen||k.open();break;case 13==o:case 32==o:f.isOpen?-1!=f._keyIndex?k.selectOption(f._keyIndex):k.close():k.open();break;case 48<=o&&o<=57:case 65<=o&&o<=90:case 97<=o&&o<=122:f._keyIndex;for(var c=l.slice(f._keyIndex+1,n),a=(c=O.merge(c,l.slice(0,f._keyIndex+1))).length,s=0;s<a;s++){if(O(c[s]).text().substr(0,1).toLowerCase()==String.fromCharCode(o).toLowerCase()){f._keyIndex=(s+f._keyIndex+1)%a,i=!0,f.isOpen||k.open();break}}break;default:return}if(e.preventDefault(),i){l.removeClass(SlickSelect.CLASS_OPTION_HIGHLIGHT);var r=l.eq(f._keyIndex);r.addClass(SlickSelect.CLASS_OPTION_HIGHLIGHT);var _=O(f._options),d=_[0].scrollHeight,S=_.height();if(S<d){var u=_.scrollTop(),p=r.position().top+u,g=r.outerHeight();u+S<p+g?_.scrollTop(p-S+g):p<u&&_.scrollTop(p)}}return!1}},_handler_focusout:function(e){return e.preventDefault(),f.isOpen&&k.close(),!1},_handler_beginDrag:function(e){if(!f._isDragging){f._beginDragPoint=k._getTouchPoint(e);var t=O(document);v.scroll&&(t.off("touchmove mousemove",k._handler_moveDrag),t.on("touchmove mousemove",k._handler_moveDrag),t.off("touchend mouseup",k._handler_endDrag),t.on("touchend mouseup",k._handler_endDrag));var l=O(f._options);if(l.is(":visible")){f._isDragging=!0;var n=l.position();f._beginDragOptionsPoint=[n.left,n.top]}}},_handler_moveDrag:function(e){if(e.preventDefault(),f._isDragging){var t=O(f._slickSelect),l=O(f._options),n=k._getTouchPoint(e),i=f._beginDragOptionsPoint[1]+(n[1]-f._beginDragPoint[1]),o=t.outerHeight()-l.outerHeight()-1;i=Math.max(Math.min(i,-1),o);for(var c=.5*t.outerHeight(),a=O("."+SlickSelect.CLASS_OPTION,t),s=a.length,r=0;r<s;r++){var _=O(a[r]),d=_.position().top,S=d+.5*_.outerHeight(),u=Math.abs(i+S-c);u<=c&&(a.removeClass(SlickSelect.CLASS_OPTION_SELECTED),a.eq(r).addClass(SlickSelect.CLASS_OPTION_SELECTED),u<v.scrollSnapDist&&(i=-d-1))}l.css("top",i+"px")}},_handler_endDrag:function(e){if(f._isDragging){f._isDragging=!1;var t=O(document);v.scroll&&(t.off("touchmove mousemove",k._handler_moveDrag),t.off("touchend mouseup",k._handler_endDrag));var l=O("."+SlickSelect.CLASS_OPTION_SELECTED,O(f._slickSelect));l.length&&k.selectOption(l)}},_getTouchPoint:function(e){var t=e;return e.originalEvent&&(e.originalEvent.touches||e.originalEvent.changedTouches)&&(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]),[t.clientX,t.clientY]}};return h.SlickSelect={isOpen:function(){return f.isOpen},selectedIndex:function(){return f.selectedIndex},value:function(){return f.value},initialize:k.initialize,destroy:k.destroy,open:k.open,close:k.close,selectOption:k.selectOption,update:k.update},h.SlickSelect.initialize(),h},O.fn.SlickSelect.defaultParams=SlickSelect.defaultParams}(jQuery);